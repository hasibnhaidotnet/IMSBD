@model Inventorymanagementsystem.ViewModels.ClientDetailsViewModel

@{
    ViewData["Title"] = "Client Details";
}

<div class="max-w-6xl mx-auto p-6 bg-gray-800 rounded-lg shadow-lg text-gray-200">
    <div class="mb-6">
        <h1 class="text-3xl font-semibold">@Model.Client.Name</h1>
        <p><strong>Client Type:</strong> @Model.Client.ClientType.ToString()</p>
        <p><strong>Contact:</strong> @Model.Client.Phone</p>
        <p><strong>Email:</strong> @Model.Client.Email</p>
    </div>

    <hr class="border-gray-700 mb-6" />

    <h3 class="text-xl font-semibold mb-3">Summary</h3>
    <table class="table-auto w-1/2 mb-6 text-gray-200">
        <tbody>
            <tr>
                <th class="text-left py-2">Total Purchase Amount</th>
                <td class="text-right py-2">৳ @(Model.TotalPurchaseAmount.ToString("N2"))</td>
            </tr>
            <tr>
                <th class="text-left py-2">Total Purchase Paid</th>
                <td class="text-right py-2">৳ @(Model.TotalPurchasePaid.ToString("N2"))</td>
            </tr>
            <tr>
                <th class="text-left py-2">Purchase Due</th>
                <td class="text-right py-2">৳ @(Model.PurchaseDue.ToString("N2"))</td>
            </tr>
            <tr>
                <th class="text-left py-2">Total Sales Amount</th>
                <td class="text-right py-2">৳ @(Model.TotalSalesAmount.ToString("N2"))</td>
            </tr>
            <tr>
                <th class="text-left py-2">Total Sales Paid</th>
                <td class="text-right py-2">৳ @(Model.TotalSalesPaid.ToString("N2"))</td>
            </tr>
            <tr>
                <th class="text-left py-2">Sales Due</th>
                <td class="text-right py-2">৳ @(Model.SalesDue.ToString("N2"))</td>
            </tr>
            <tr class="bg-indigo-700 font-semibold">
                <th class="text-left py-2">Total Paid (Purchase + Sales)</th>
                <td class="text-right py-2">৳ @(Model.TotalPaid.ToString("N2"))</td>
            </tr>
            <tr class="bg-red-700 font-semibold">
                <th class="text-left py-2">Total Due (Purchase + Sales)</th>
                <td class="text-right py-2">৳ @(Model.TotalDue.ToString("N2"))</td>
            </tr>
        </tbody>
    </table>

    <hr class="border-gray-700 mb-6" />

    <h3 class="text-xl font-semibold mb-3">Purchase History</h3>
    <div class="overflow-x-auto rounded-lg shadow-inner bg-gray-900 mb-6">
        <table class="min-w-full divide-y divide-gray-700 text-gray-200">
            <thead class="bg-gray-700 text-left text-sm font-semibold">
                <tr>
                    <th class="py-3 px-4">Memo No</th>
                    <th class="py-3 px-4">Date</th>
                    <th class="py-3 px-4 text-right">Total Amount</th>
                    <th class="py-3 px-4 text-right">Paid Amount</th>
                    <th class="py-3 px-4 text-right">Due Amount</th>
                    <th class="py-3 px-4">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-700">
                @foreach (var p in Model.Purchases)
                {
                    <tr class="hover:bg-gray-700 transition">
                        <td class="py-3 px-4">@p.MemoNo</td>
                        <td class="py-3 px-4">@p.PurchaseDate.ToString("yyyy-MM-dd")</td>
                        <td class="py-3 px-4 text-right">৳ @(p.TotalAmount.ToString("N2"))</td>
                        <td class="py-3 px-4 text-right">৳ @(p.PaidAmount.ToString("N2"))</td>
                        <td class="py-3 px-4 text-right">৳ @((p.TotalAmount - p.PaidAmount).ToString("N2"))</td>
                        <td class="py-3 px-4">
                            <a asp-controller="Purchase" asp-action="Details" asp-route-id="@p.Id"
                               class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition">
                                Details
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <h3 class="text-xl font-semibold mb-3">Sales History</h3>
    <div class="overflow-x-auto rounded-lg shadow-inner bg-gray-900">
        <table class="min-w-full divide-y divide-gray-700 text-gray-200">
            <thead class="bg-gray-700 text-left text-sm font-semibold">
                <tr>
                    <th class="py-3 px-4">Memo No</th>
                    <th class="py-3 px-4">Date</th>
                    <th class="py-3 px-4 text-right">Total Amount</th>
                    <th class="py-3 px-4 text-right">Paid Amount</th>
                    <th class="py-3 px-4 text-right">Due Amount</th>
                    <th class="py-3 px-4">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-700">
                @foreach (var s in Model.Sales)
                {
                    <tr class="hover:bg-gray-700 transition">
                        <td class="py-3 px-4">@s.MemoNo</td>
                        <td class="py-3 px-4">@s.SaleDate.ToString("yyyy-MM-dd")</td>
                        <td class="py-3 px-4 text-right">৳ @(s.TotalAmount.ToString("N2"))</td>
                        <td class="py-3 px-4 text-right">৳ @(s.PaidAmount.ToString("N2"))</td>
                        <td class="py-3 px-4 text-right">৳ @((s.TotalAmount - s.PaidAmount).ToString("N2"))</td>
                        <td class="py-3 px-4">
                            <a asp-controller="Sale" asp-action="Details" asp-route-id="@s.Id"
                               class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition">
                                Details
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
